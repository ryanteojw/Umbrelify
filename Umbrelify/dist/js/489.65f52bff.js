(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[489],{6135:function(e,t,r){"use strict";var i=r(4948),a=r(3070),o=r(9114);e.exports=function(e,t,r){var n=i(t);n in e?a.f(e,n,o(0,r)):e[n]=r}},7871:function(e,t,r){var i=r(3823),a=r(5268);e.exports=!i&&!a&&"object"==typeof window&&"object"==typeof document},3823:function(e){e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},5268:function(e,t,r){var i=r(4326),a=r(7854);e.exports="process"==i(a.process)},2914:function(e,t,r){var i=r(7293),a=r(9114);e.exports=!i((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)}))},1246:function(e,t,r){var i=r(648),a=r(8173),o=r(8554),n=r(7497),s=r(5112),l=s("iterator");e.exports=function(e){if(!o(e))return a(e,l)||a(e,"@@iterator")||n[i(e)]}},4121:function(e,t,r){var i=r(6916),a=r(9662),o=r(9670),n=r(6330),s=r(1246),l=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(a(r))return o(i(r,e));throw l(n(e)+" is not iterable")}},7659:function(e,t,r){var i=r(5112),a=r(7497),o=i("iterator"),n=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||n[o]===e)}},4411:function(e,t,r){var i=r(1702),a=r(7293),o=r(614),n=r(648),s=r(5005),l=r(2788),c=function(){},u=[],d=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,h=i(p.exec),m=!p.exec(c),f=function(e){if(!o(e))return!1;try{return d(c,u,e),!0}catch(t){return!1}},g=function(e){if(!o(e))return!1;switch(n(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!h(p,l(e))}catch(t){return!0}};g.sham=!0,e.exports=!d||a((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?g:f},408:function(e,t,r){var i=r(9974),a=r(6916),o=r(9670),n=r(6330),s=r(7659),l=r(6244),c=r(7976),u=r(4121),d=r(1246),p=r(9212),h=TypeError,m=function(e,t){this.stopped=e,this.result=t},f=m.prototype;e.exports=function(e,t,r){var g,v,y,b,k,w,C,x=r&&r.that,M=!(!r||!r.AS_ENTRIES),O=!(!r||!r.IS_RECORD),S=!(!r||!r.IS_ITERATOR),_=!(!r||!r.INTERRUPTED),E=i(t,x),P=function(e){return g&&p(g,"normal",e),new m(!0,e)},I=function(e){return M?(o(e),_?E(e[0],e[1],P):E(e[0],e[1])):_?E(e,P):E(e)};if(O)g=e.iterator;else if(S)g=e;else{if(v=d(e),!v)throw h(n(e)+" is not iterable");if(s(v)){for(y=0,b=l(e);b>y;y++)if(k=I(e[y]),k&&c(f,k))return k;return new m(!1)}g=u(e,v)}w=O?e.next:g.next;while(!(C=a(w,g)).done){try{k=I(C.value)}catch(T){p(g,"throw",T)}if("object"==typeof k&&k&&c(f,k))return k}return new m(!1)}},9212:function(e,t,r){var i=r(6916),a=r(9670),o=r(8173);e.exports=function(e,t,r){var n,s;a(e);try{if(n=o(e,"return"),!n){if("throw"===t)throw r;return r}n=i(n,e)}catch(l){s=!0,n=l}if("throw"===t)throw r;if(s)throw n;return a(n),r}},7497:function(e){e.exports={}},4706:function(e,t,r){var i=r(6916),a=r(2597),o=r(7976),n=r(7066),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||a(e,"flags")||!o(s,e)?t:i(n,e)}},8053:function(e){var t=TypeError;e.exports=function(e,r){if(e<r)throw t("Not enough arguments");return e}},1295:function(e,t,r){var i=r(1913),a=r(2109),o=r(7854),n=r(5005),s=r(1702),l=r(7293),c=r(9711),u=r(614),d=r(4411),p=r(8554),h=r(111),m=r(2190),f=r(408),g=r(9670),v=r(648),y=r(2597),b=r(6135),k=r(8880),w=r(6244),C=r(8053),x=r(4706),M=r(2914),O=r(7392),S=r(7871),_=r(3823),E=r(5268),P=o.Object,I=o.Date,T=o.Error,L=o.EvalError,A=o.RangeError,j=o.ReferenceError,R=o.SyntaxError,D=o.TypeError,q=o.URIError,z=o.PerformanceMark,Z=o.WebAssembly,B=Z&&Z.CompileError||T,N=Z&&Z.LinkError||T,H=Z&&Z.RuntimeError||T,F=n("DOMException"),$=n("Set"),U=n("Map"),W=U.prototype,V=s(W.has),J=s(W.get),G=s(W.set),K=s($.prototype.add),X=n("Object","keys"),Y=s([].push),Q=s((!0).valueOf),ee=s(1..valueOf),te=s("".valueOf),re=s(I.prototype.getTime),ie=c("structuredClone"),ae="DataCloneError",oe="Transferring",ne=function(e){return!l((function(){var t=new o.Set([7]),r=e(t),i=e(P(7));return r==t||!r.has(7)||"object"!=typeof i||7!=i}))&&e},se=function(e,t){return!l((function(){var r=new t,i=e({a:r,b:r});return!(i&&i.a===i.b&&i.a instanceof t&&i.a.stack===r.stack)}))},le=function(e){return!l((function(){var t=e(new o.AggregateError([1],ie,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=ie||3!=t.cause}))},ce=o.structuredClone,ue=i||!se(ce,T)||!se(ce,F)||!le(ce),de=!ce&&ne((function(e){return new z(ie,{detail:e}).detail})),pe=ne(ce)||de,he=function(e){throw new F("Uncloneable type: "+e,ae)},me=function(e,t){throw new F((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",ae)},fe=function(){var e;try{e=new o.DataTransfer}catch(t){try{e=new o.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},ge=function(e,t){if(m(e)&&he("Symbol"),!h(e))return e;if(t){if(V(t,e))return J(t,e)}else t=new U;var r,i,a,s,l,c,d,p,f,g,C=v(e),O=!1;switch(C){case"Array":a=[],O=!0;break;case"Object":a={},O=!0;break;case"Map":a=new U,O=!0;break;case"Set":a=new $,O=!0;break;case"RegExp":a=new RegExp(e.source,x(e));break;case"Error":switch(i=e.name,i){case"AggregateError":a=n("AggregateError")([]);break;case"EvalError":a=L();break;case"RangeError":a=A();break;case"ReferenceError":a=j();break;case"SyntaxError":a=R();break;case"TypeError":a=D();break;case"URIError":a=q();break;case"CompileError":a=B();break;case"LinkError":a=N();break;case"RuntimeError":a=H();break;default:a=T()}O=!0;break;case"DOMException":a=new F(e.message,e.name),O=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":r=o[C],h(r)||me(C),a=new r(ge(e.buffer,t),e.byteOffset,"DataView"===C?e.byteLength:e.length);break;case"DOMQuad":try{a=new DOMQuad(ge(e.p1,t),ge(e.p2,t),ge(e.p3,t),ge(e.p4,t))}catch(S){pe?a=pe(e):me(C)}break;case"FileList":if(s=fe(),s){for(l=0,c=w(e);l<c;l++)s.items.add(ge(e[l],t));a=s.files}else pe?a=pe(e):me(C);break;case"ImageData":try{a=new ImageData(ge(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(S){pe?a=pe(e):me(C)}break;default:if(pe)a=pe(e);else switch(C){case"BigInt":a=P(e.valueOf());break;case"Boolean":a=P(Q(e));break;case"Number":a=P(ee(e));break;case"String":a=P(te(e));break;case"Date":a=new I(re(e));break;case"ArrayBuffer":r=o.DataView,r||"function"==typeof e.slice||me(C);try{if("function"==typeof e.slice)a=e.slice(0);else for(c=e.byteLength,a=new ArrayBuffer(c),f=new r(e),g=new r(a),l=0;l<c;l++)g.setUint8(l,f.getUint8(l))}catch(S){throw new F("ArrayBuffer is detached",ae)}break;case"SharedArrayBuffer":a=e;break;case"Blob":try{a=e.slice(0,e.size,e.type)}catch(S){me(C)}break;case"DOMPoint":case"DOMPointReadOnly":r=o[C];try{a=r.fromPoint?r.fromPoint(e):new r(e.x,e.y,e.z,e.w)}catch(S){me(C)}break;case"DOMRect":case"DOMRectReadOnly":r=o[C];try{a=r.fromRect?r.fromRect(e):new r(e.x,e.y,e.width,e.height)}catch(S){me(C)}break;case"DOMMatrix":case"DOMMatrixReadOnly":r=o[C];try{a=r.fromMatrix?r.fromMatrix(e):new r(e)}catch(S){me(C)}break;case"AudioData":case"VideoFrame":u(e.clone)||me(C);try{a=e.clone()}catch(S){he(C)}break;case"File":try{a=new File([e],e.name,e)}catch(S){me(C)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":me(C);default:he(C)}}if(G(t,e,a),O)switch(C){case"Array":case"Object":for(d=X(e),l=0,c=w(d);l<c;l++)p=d[l],b(a,p,ge(e[p],t));break;case"Map":e.forEach((function(e,r){G(a,ge(r,t),ge(e,t))}));break;case"Set":e.forEach((function(e){K(a,ge(e,t))}));break;case"Error":k(a,"message",ge(e.message,t)),y(e,"cause")&&k(a,"cause",ge(e.cause,t)),"AggregateError"==i&&(a.errors=ge(e.errors,t));case"DOMException":M&&k(a,"stack",ge(e.stack,t))}return a},ve=ce&&!l((function(){if(_&&O>92||E&&O>94||S&&O>97)return!1;var e=new ArrayBuffer(8),t=ce(e,{transfer:[e]});return 0!=e.byteLength||8!=t.byteLength})),ye=function(e,t){if(!h(e))throw D("Transfer option cannot be converted to a sequence");var r=[];f(e,(function(e){Y(r,g(e))}));var i,a,n,s,l,c,p,m=0,y=w(r);if(ve){s=ce(r,{transfer:r});while(m<y)G(t,r[m],s[m++])}else while(m<y){if(i=r[m++],V(t,i))throw new F("Duplicate transferable",ae);switch(a=v(i),a){case"ImageBitmap":n=o.OffscreenCanvas,d(n)||me(a,oe);try{c=new n(i.width,i.height),p=c.getContext("bitmaprenderer"),p.transferFromImageBitmap(i),l=c.transferToImageBitmap()}catch(b){}break;case"AudioData":case"VideoFrame":u(i.clone)&&u(i.close)||me(a,oe);try{l=i.clone(),i.close()}catch(b){}break;case"ArrayBuffer":case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":me(a,oe)}if(void 0===l)throw new F("This object cannot be transferred: "+a,ae);G(t,i,l)}};a({global:!0,enumerable:!0,sham:!ve,forced:ue},{structuredClone:function(e){var t,r=C(arguments.length,1)>1&&!p(arguments[1])?g(arguments[1]):void 0,i=r?r.transfer:void 0;return void 0!==i&&(t=new U,ye(i,t)),ge(e,t)}})},7489:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ze}});var i=r(3396),a=r(2268);const o={id:"map"},n={class:"container"},s={key:0,class:"bg-warning"},l={key:0,class:"container bg-dark p-1"},c=(0,i._)("h5",{class:"text-center text-light"},"Click event timing to see weather forecast",-1),u={class:"d-flex justify-content-center"},d={key:0},p=["onClick"];function h(e,t,r,h,m,f){const g=(0,i.up)("InfoWindow"),v=(0,i.up)("Marker"),y=(0,i.up)("GoogleMap");return(0,i.wg)(),(0,i.iD)("main",o,[(0,i._)("div",n,[(0,i.Wm)(y,{id:"map","api-key":m.apiKey,style:{width:"100%",height:"400px"},center:{lat:1.3521,lng:103.8198},zoom:10.7},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{options:{position:{lat:Number(m.currentMarker.lat),lng:Number(m.currentMarker.lng)}}},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{class:"text-center"},{default:(0,i.w5)((()=>[(0,i._)("p",null,"Activity: "+(0,a.zw)(m.currentMarker.activityName),1),(0,i._)("p",null,"Location: "+(0,a.zw)(m.currentMarker.location),1),(0,i._)("p",null,"Weather: "+(0,a.zw)(m.currentMarker.weather),1),1==m.currentMarker.isRain?((0,i.wg)(),(0,i.iD)("b",s,"Please bring an umbrella out!")):(0,i.kq)("",!0)])),_:1})])),_:1},8,["options"])])),_:1},8,["api-key","center","zoom"]),m.markerArr.length>0?((0,i.wg)(),(0,i.iD)("div",l,[c,(0,i._)("div",u,[m.markerArr?((0,i.wg)(),(0,i.iD)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.markerArr,((e,t)=>((0,i.wg)(),(0,i.iD)("button",{key:t,type:"button",class:"btn btn-primary m-2",onClick:e=>f.forecast(t)},(0,a.zw)(e.startTime)+" - "+(0,a.zw)(e.endTime),9,p)))),128))])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])])}r(7658),r(2087),r(3408),r(4590),r(2801),r(1295);var m=r(4870),f=r(9242);let g=Symbol("map"),v=Symbol("api"),y=Symbol("marker"),b=Symbol("markerCluster"),k=Symbol("CustomMarker"),w=Symbol("mapTilesLoaded"),C="click dblclick drag dragend dragstart mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");var x=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i;if(Array.isArray(t)){var a=t.length;if(a!=r.length)return!1;for(i=a;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();var o=Object.keys(t);if(a=o.length,a!==Object.keys(r).length)return!1;for(i=a;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=a;0!==i--;)if(a=o[i],!e(t[a],r[a]))return!1;return!0}return t!==t&&r!==r};class M{constructor({apiKey:e,channel:t,client:r,id:i="__googleMapsScriptId",libraries:a=[],language:o,region:n,version:s,mapIds:l,nonce:c,retries:u=3,url:d="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.loading=this.done=!1,this.errors=[],this.version=s,this.apiKey=e,this.channel=t,this.client=r,this.id=i||"__googleMapsScriptId",this.libraries=a,this.language=o,this.region=n,this.mapIds=l,this.nonce=c,this.retries=u,this.url=d,M.instance){if(!x(this.options,M.instance.options))throw Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(M.instance.options)}`);return M.instance}M.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),0<this.libraries.length&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((r=>{r?t(r.error):e(window.google)}))}))}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))this.callback();else{var e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}}reset(){this.deleteScript(),this.loading=this.done=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){this.errors.push(e),this.errors.length<=this.retries?(e=this.errors.length*Math.pow(2,this.errors.length),console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)):(this.onerrorEvent=e,this.callback())}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){this.resetIfRetryingFailed(),this.done?this.callback():window.google&&window.google.maps&&window.google.maps.version?(console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback()):this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}function O(e){return class extends e.OverlayView{constructor(e){super();let{element:t,...r}=e;this.element=t,this.opts=r,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof e.LatLng?this.opts.position:new e.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;let e=this.element;return"none"!==e.style.display&&"hidden"!==e.style.visibility&&(""===e.style.opacity||.01<Number(e.style.opacity))}onAdd(){if(this.element){var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.element)}}draw(){if(this.element){var e=this.getProjection().fromLatLngToDivPixel(this.getPosition());if(e){this.element.style.position="absolute";let r=this.element.offsetHeight;var t=this.element.offsetWidth;switch(this.opts.anchorPoint){case"TOP_CENTER":t=e.x-t/2,e=e.y;break;case"BOTTOM_CENTER":t=e.x-t/2,e=e.y-r;break;case"LEFT_CENTER":t=e.x,e=e.y-r/2;break;case"RIGHT_CENTER":t=e.x-t,e=e.y-r/2;break;case"TOP_LEFT":t=e.x,e=e.y;break;case"TOP_RIGHT":t=e.x-t,e=e.y;break;case"BOTTOM_LEFT":t=e.x,e=e.y-r;break;case"BOTTOM_RIGHT":t=e.x-t,e=e.y-r;break;default:t=e.x-t/2,e=e.y-r/2}this.element.style.left=t+"px",this.element.style.top=e+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}}onRemove(){this.element&&this.element.remove()}setOptions(e){this.opts=e,this.draw()}}}let S,_="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed".split(" ");var E=(0,i.aZ)({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:_,setup(e,{emit:t}){let r=(0,m.iH)(),a=(0,m.iH)(!1),o=(0,m.iH)(),n=(0,m.iH)(),s=(0,m.iH)(!1);(0,i.JJ)(g,o),(0,i.JJ)(v,n),(0,i.JJ)(w,s);let l=()=>{const t={...e};Object.keys(t).forEach((e=>{void 0===t[e]&&delete t[e]}));var r=e=>{var t;return e?{position:null===(t=n.value)||void 0===t?void 0:t.ControlPosition[e]}:{}};return r={scaleControlOptions:e.scaleControlStyle?{style:e.scaleControlStyle}:{},panControlOptions:r(e.panControlPosition),zoomControlOptions:r(e.zoomControlPosition),rotateControlOptions:r(e.rotateControlPosition),streetViewControlOptions:r(e.streetViewControlPosition),fullscreenControlOptions:r(e.fullscreenControlPosition),disableDefaultUI:e.disableDefaultUi},{...t,...r}},c=(0,i.YP)([n,o],(([e,t])=>{e&&t&&(e.event.addListenerOnce(t,"tilesloaded",(()=>{s.value=!0})),setTimeout(c,0))}),{immediate:!0}),u=s=>{n.value=(0,m.Xl)(s.maps),o.value=(0,m.Xl)(new s.maps.Map(r.value,l())),s=O(n.value),n.value[k]=s,_.forEach((e=>{var r;null===(r=o.value)||void 0===r||r.addListener(e,(r=>t(e,r)))})),a.value=!0,s=Object.keys(e).filter((e=>!"apiPromise apiKey version libraries region language center zoom".split(" ").includes(e))).map((t=>(0,m.Vh)(e,t))),(0,i.YP)([()=>e.center,()=>e.zoom,...s],(([e,t],[r,i])=>{var a,n,s;const{center:c,zoom:u,...d}=l();null===(a=o.value)||void 0===a||a.setOptions(d),void 0!==t&&t!==i&&(null===(n=o.value)||void 0===n||n.setZoom(t)),t=!r||e.lng!==r.lng||e.lat!==r.lat,e&&t&&(null===(s=o.value)||void 0===s||s.panTo(e))}))};return(0,i.bv)((()=>{if(e.apiPromise&&e.apiPromise instanceof Promise)e.apiPromise.then(u);else{try{const{apiKey:t,region:r,version:i,language:a,libraries:o}=e;S=new M({apiKey:t,region:r,version:i,language:a,libraries:o})}catch(t){console.error(t)}S.load().then(u)}})),(0,i.Jd)((()=>{var e;s.value=!1,o.value&&(null===(e=n.value)||void 0===e||e.event.clearInstanceListeners(o.value))})),{mapRef:r,ready:a,map:o,api:n,mapTilesLoaded:s}}});function P(e,t){if(void 0===t&&(t={}),t=t.insertAt,e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}P("\n.mapdiv[data-v-177d06e3] {\n  width: 100%;\n  height: 100%;\n}\n");let I=(0,i.HX)("data-v-177d06e3");(0,i.dD)("data-v-177d06e3");let T={ref:"mapRef",class:"mapdiv"};(0,i.Cn)();let L=I((e=>((0,i.wg)(),(0,i.j4)("div",null,[(0,i.Wm)("div",T,null,512),(0,i.WI)(e.$slots,"default",{ready:e.ready,map:e.map,api:e.api,mapTilesLoaded:e.mapTilesLoaded},void 0,!0)]))));E.render=L,E.__scopeId="data-v-177d06e3";var A=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i;if(Array.isArray(t)){var a=t.length;if(a!=r.length)return!1;for(i=a;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();var o=Object.keys(t);if(a=o.length,a!==Object.keys(r).length)return!1;for(i=a;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=a;0!==i--;)if(a=o[i],!e(t[a],r[a]))return!1;return!0}return t!==t&&r!==r};let j=(e,t,r,a)=>{const o=(0,m.iH)(),n=(0,i.f3)(g,(0,m.iH)()),s=(0,i.f3)(v,(0,m.iH)()),l=(0,i.f3)(b,(0,m.iH)()),c=(0,i.Fl)((()=>!!(l.value&&s.value&&(o.value instanceof s.value.Marker||o.value instanceof s.value[k]))));return(0,i.YP)([n,r],((i,[u,d])=>{var p,h,f;i=!A(r.value,d)||n.value!==u,n.value&&s.value&&i&&(o.value?(o.value.setOptions(r.value),c.value&&(null===(p=l.value)||void 0===p||p.removeMarker(o.value),null===(h=l.value)||void 0===h||h.addMarker(o.value))):(o.value="Marker"===e||e===k?(0,m.Xl)(new s.value[e](r.value)):(0,m.Xl)(new s.value[e]({...r.value,map:n.value})),c.value?null===(f=l.value)||void 0===f||f.addMarker(o.value):o.value.setMap(n.value),t.forEach((e=>{var t;null===(t=o.value)||void 0===t||t.addListener(e,(t=>a(e,t)))}))))}),{immediate:!0}),(0,i.Jd)((()=>{var e,t;o.value&&(null===(e=s.value)||void 0===e||e.event.clearInstanceListeners(o.value),c.value?null===(t=l.value)||void 0===t||t.removeMarker(o.value):o.value.setMap(null))})),o},R="animation_changed click dblclick rightclick dragstart dragend drag mouseover mousedown mouseout mouseup draggable_changed clickable_changed contextmenu cursor_changed flat_changed rightclick zindex_changed icon_changed position_changed shape_changed title_changed visible_changed".split(" ");var D=(0,i.aZ)({name:"Marker",props:{options:{type:Object,required:!0}},emits:R,setup(e,{emit:t,expose:r,slots:a}){return e=(0,m.Vh)(e,"options"),t=j("Marker",R,e,t),(0,i.JJ)(y,t),r({marker:t}),()=>{var e;return null===(e=a.default)||void 0===e?void 0:e.call(a)}}});(0,i.aZ)({name:"Polyline",props:{options:{type:Object,required:!0}},emits:C,setup(e,{emit:t}){return e=(0,m.Vh)(e,"options"),{polyline:j("Polyline",C,e,t)}},render:()=>null}),(0,i.aZ)({name:"Polygon",props:{options:{type:Object,required:!0}},emits:C,setup(e,{emit:t}){return e=(0,m.Vh)(e,"options"),{polygon:j("Polygon",C,e,t)}},render:()=>null});let q=C.concat(["bounds_changed"]);(0,i.aZ)({name:"Rectangle",props:{options:{type:Object,required:!0}},emits:q,setup(e,{emit:t}){return e=(0,m.Vh)(e,"options"),{rectangle:j("Rectangle",q,e,t)}},render:()=>null});let z=C.concat(["center_changed","radius_changed"]);(0,i.aZ)({name:"Circle",props:{options:{type:Object,required:!0}},emits:z,setup(e,{emit:t}){return e=(0,m.Vh)(e,"options"),{circle:j("Circle",z,e,t)}},render:()=>null});var Z=(0,i.aZ)({props:{position:{type:String,required:!0},index:{type:Number,default:1}},emits:["content:loaded"],setup(e,{emit:t}){let r=(0,m.iH)(null),a=(0,i.f3)(g,(0,m.iH)()),o=(0,i.f3)(v,(0,m.iH)()),n=(0,i.f3)(w,(0,m.iH)(!1)),s=(0,m.iH)(!1),l=(0,i.YP)([n,o,r],(([r,i,a])=>{i&&r&&a&&(c(e.position),s.value=!0,t("content:loaded"),setTimeout(l,0))}),{immediate:!0}),c=e=>{a.value&&o.value&&r.value&&a.value.controls[o.value.ControlPosition[e]].push(r.value)},u=e=>{if(a.value&&o.value){let t=null;e=o.value.ControlPosition[e],a.value.controls[e].forEach(((e,i)=>{e===r.value&&(t=i)})),null!==t&&a.value.controls[e].removeAt(t)}};return(0,i.Jd)((()=>u(e.position))),(0,i.YP)((()=>e.position),((e,t)=>{u(t),c(e)})),(0,i.YP)((()=>e.index),(t=>{t&&r.value&&(r.value.index=e.index)})),{controlRef:r,showContent:s}}});let B={ref:"controlRef"};Z.render=function(e){return(0,i.wg)(),(0,i.j4)(i.HY,null,[(0,i.kq)("\n    v-show must be used instead of v-if otherwise there\n    would be no rendered content pushed to the map controls\n  "),(0,i.wy)((0,i.Wm)("div",B,[(0,i.WI)(e.$slots,"default")],512),[[f.F8,e.showContent]])],2112)};let N="closeclick content_changed domready position_changed visible zindex_changed".split(" ");var H=(0,i.aZ)({inheritAttrs:!1,props:{options:{type:Object,default:()=>({})}},emits:N,setup(e,{slots:t,emit:r}){let a,o=(0,m.iH)(),n=(0,m.iH)(),s=(0,i.f3)(g,(0,m.iH)()),l=(0,i.f3)(v,(0,m.iH)()),c=(0,i.f3)(y,(0,m.iH)()),u=(0,i.Fl)((()=>{var e;return null===(e=t.default)||void 0===e?void 0:e.call(t).some((e=>e.type!==i.sv))}));return(0,i.bv)((()=>{(0,i.YP)([s,()=>e.options],(([,e],[t,i])=>{t=!A(e,i)||s.value!==t,s.value&&l.value&&t&&(o.value?(o.value.setOptions({...e,content:u.value?n.value:e.content}),c.value||o.value.open({map:s.value})):(o.value=(0,m.Xl)(new l.value.InfoWindow({...e,content:u.value?n.value:e.content})),c.value?a=c.value.addListener("click",(()=>{o.value&&o.value.open({map:s.value,anchor:c.value})})):o.value.open({map:s.value}),N.forEach((e=>{var t;null===(t=o.value)||void 0===t||t.addListener(e,(t=>r(e,t)))}))))}),{immediate:!0})})),(0,i.Jd)((()=>{var e;a&&a.remove(),o.value&&(null===(e=l.value)||void 0===e||e.event.clearInstanceListeners(o.value),o.value.close())})),{infoWindow:o,infoWindowRef:n,hasSlotContent:u}}});P("\n.info-window-wrapper[data-v-5b373d6e] {\n  display: none;\n}\n.mapdiv .info-window-wrapper[data-v-5b373d6e] {\n  display: inline-block;\n}\n");let F=(0,i.HX)("data-v-5b373d6e");(0,i.dD)("data-v-5b373d6e");let $={key:0,class:"info-window-wrapper"};(0,i.Cn)();let U=F((e=>e.hasSlotContent?((0,i.wg)(),(0,i.j4)("div",$,[(0,i.Wm)("div",(0,i.dG)({ref:"infoWindowRef"},e.$attrs),[(0,i.WI)(e.$slots,"default",{},void 0,!0)],16)])):(0,i.kq)("v-if",!0)));function W(e,t,r,i,a,o){if(!(a-i<=r)){var n=i+a>>1;V(e,t,n,i,a,o%2),W(e,t,r,i,n-1,o+1),W(e,t,r,n+1,a,o+1)}}function V(e,t,r,i,a,o){for(;a>i;){if(600<a-i){var n=a-i+1,s=r-i+1,l=Math.log(n),c=.5*Math.exp(2*l/3);l=.5*Math.sqrt(l*c*(n-c)/n)*(0>s-n/2?-1:1),V(e,t,r,Math.max(i,Math.floor(r-s*c/n+l)),Math.min(a,Math.floor(r+(n-s)*c/n+l)),o)}for(n=t[2*r+o],s=i,c=a,J(e,t,i,r),t[2*a+o]>n&&J(e,t,i,a);s<c;){for(J(e,t,s,c),s++,c--;t[2*s+o]<n;)s++;for(;t[2*c+o]>n;)c--}t[2*i+o]===n?J(e,t,i,c):(c++,J(e,t,c,a)),c<=r&&(i=c+1),r<=c&&(a=c-1)}}function J(e,t,r,i){G(e,r,i),G(t,2*r,2*i),G(t,2*r+1,2*i+1)}function G(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}H.render=U,H.__scopeId="data-v-5b373d6e";let K=e=>e[0],X=e=>e[1];class Y{constructor(e,t=K,r=X,i=64,a=Float64Array){this.nodeSize=i,this.points=e;let o=this.ids=new(65536>e.length?Uint16Array:Uint32Array)(e.length);a=this.coords=new a(2*e.length);for(let n=0;n<e.length;n++)o[n]=n,a[2*n]=t(e[n]),a[2*n+1]=r(e[n]);W(o,a,i,0,o.length-1,0)}range(e,t,r,i){{var a=this.ids,o=this.coords,n=this.nodeSize;let l,c,u=[0,a.length-1,0],d=[];for(;u.length;){var s=u.pop();let p=u.pop(),h=u.pop();if(p-h<=n){for(s=h;s<=p;s++)l=o[2*s],c=o[2*s+1],l>=e&&l<=r&&c>=t&&c<=i&&d.push(a[s]);continue}let m=Math.floor((h+p)/2);l=o[2*m],c=o[2*m+1],l>=e&&l<=r&&c>=t&&c<=i&&d.push(a[m]);let f=(s+1)%2;(0===s?e<=l:t<=c)&&(u.push(h),u.push(m-1),u.push(f)),(0===s?r>=l:i>=c)&&(u.push(m+1),u.push(p),u.push(f))}e=d}return e}within(e,t,r){{var i=this.ids,a=this.coords,o=this.nodeSize;let u=[0,i.length-1,0],d=[],p=r*r;for(;u.length;){var n=u.pop();let h=u.pop();var s=u.pop();if(h-s<=o){for(n=s;n<=h;n++){s=a[2*n]-e;var l=a[2*n+1]-t;s=s*s+l*l,s<=p&&d.push(i[n])}continue}l=Math.floor((s+h)/2);let m=a[2*l],f=a[2*l+1];{var c=m-e;let r=f-t;c=c*c+r*r}c<=p&&d.push(i[l]),c=(n+1)%2,(0===n?e-r<=m:t-r<=f)&&(u.push(s),u.push(l-1),u.push(c)),(0===n?e+r>=m:t+r>=f)&&(u.push(l+1),u.push(h),u.push(c))}e=d}return e}}let Q={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},ee=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1));class te{constructor(e){this.options=se(Object.create(Q),e),this.trees=Array(this.options.maxZoom+1)}load(e){let{log:t,minZoom:r,maxZoom:i,nodeSize:a}=this.options;t&&console.time("total time");var o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;let n=[];for(let s=0;s<e.length;s++)e[s].geometry&&n.push(ie(e[s],s));for(this.trees[i+1]=new Y(n,le,ce,a,Float32Array),t&&console.timeEnd(o),e=i;e>=r;e--)o=+Date.now(),n=this._cluster(n,e),this.trees[e]=new Y(n,le,ce,a,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,n.length,+Date.now()-o);return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;var i=Math.max(-90,Math.min(90,e[1])),a=180===e[2]?180:((e[2]+180)%360+360)%360-180;let o=Math.max(-90,Math.min(90,e[3]));if(360<=e[2]-e[0])r=-180,a=180;else if(r>a){var n=this.getClusters([r,i,180,o],t);return i=this.getClusters([-180,i,a,o],t),n.concat(i)}for(n of(t=this.trees[this._limitZoom(t)],a=t.range(r/360+.5,ne(o),a/360+.5,ne(i)),i=[],a))a=t.points[n],i.push(a.numPoints?ae(a):this.points[a.index]);return i}getChildren(e){var t=this._getOriginId(e),r=this._getOriginZoom(e);let i=this.trees[r];if(!i)throw Error("No cluster with the specified id.");if(t=i.points[t],!t)throw Error("No cluster with the specified id.");t=i.within(t.x,t.y,this.options.radius/(this.options.extent*Math.pow(2,r-1))),r=[];for(let a of t)t=i.points[a],t.parentId===e&&r.push(t.numPoints?ae(t):this.points[t.index]);if(0===r.length)throw Error("No cluster with the specified id.");return r}getLeaves(e,t,r){let i=[];return this._appendLeaves(i,e,t||10,r||0,0),i}getTile(e,t,r){let i=this.trees[this._limitZoom(e)];e=Math.pow(2,e);let{extent:a,radius:o}=this.options,n=o/a,s=(r-n)/e,l=(r+1+n)/e,c={features:[]};return this._addTileFeatures(i.range((t-n)/e,s,(t+1+n)/e,l),i.points,t,r,e,c),0===t&&this._addTileFeatures(i.range(1-n/e,s,1,l),i.points,e,r,e,c),t===e-1&&this._addTileFeatures(i.range(0,s,n/e,l),i.points,-1,r,e,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){if(e=this.getChildren(e),t++,1!==e.length)break;e=e[0].properties.cluster_id}return t}_appendLeaves(e,t,r,i,a){t=this.getChildren(t);for(let o of t)if((t=o.properties)&&t.cluster?a=a+t.point_count<=i?a+t.point_count:this._appendLeaves(e,t.cluster_id,r,i,a):a<i?a++:e.push(o),e.length===r)break;return a}_addTileFeatures(e,t,r,i,a,o){for(let l of e){e=t[l];let c=e.numPoints;var n=void 0;let u;var s=void 0;let d;c?(n=oe(e),u=e.x,s=e.y):(s=this.points[e.index],n=s.properties,u=s.geometry.coordinates[0]/360+.5,s=ne(s.geometry.coordinates[1])),n={type:1,geometry:[[Math.round(this.options.extent*(u*a-r)),Math.round(this.options.extent*(s*a-i))]],tags:n},c?d=e.id:this.options.generateId?d=e.index:this.points[e.index].id&&(d=this.points[e.index].id),void 0!==d&&(n.id=d),o.features.push(n)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){let r=[],{radius:i,extent:a,reduce:o,minPoints:n}=this.options,s=i/(a*Math.pow(2,t));for(let p=0;p<e.length;p++){var l=e[p];if(l.zoom<=t)continue;l.zoom=t;let i=this.trees[t+1];var c=i.within(l.x,l.y,s),u=l.numPoints||1;let a=u;for(let e of c){var d=i.points[e];d.zoom>t&&(a+=d.numPoints||1)}if(a>u&&a>=n){d=l.x*u;let e=l.y*u;u=o&&1<u?this._map(l,!0):null;let n=(p<<5)+(t+1)+this.points.length;for(let r of c){if(c=i.points[r],c.zoom<=t)continue;c.zoom=t;let a=c.numPoints||1;d+=c.x*a,e+=c.y*a,c.parentId=n,o&&(u||(u=this._map(l,!0)),o(u,this._map(c)))}l.parentId=n,r.push(re(d/a,e/a,n,a,u))}else if(r.push(l),1<a)for(let e of c)l=i.points[e],l.zoom<=t||(l.zoom=t,r.push(l))}return r}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?se({},e.properties):e.properties;e=this.points[e.index].properties;let r=this.options.map(e);return t&&r===e?se({},r):r}}function re(e,t,r,i,a){return{x:ee(e),y:ee(t),zoom:1/0,id:r,parentId:-1,numPoints:i,properties:a}}function ie(e,t){let[r,i]=e.geometry.coordinates;return{x:ee(r/360+.5),y:ee(ne(i)),zoom:1/0,index:t,parentId:-1}}function ae(e){var t=e.id,r=oe(e);return{type:"Feature",id:t,properties:r,geometry:{type:"Point",coordinates:[360*(e.x-.5),360*Math.atan(Math.exp((180-360*e.y)*Math.PI/180))/Math.PI-90]}}}function oe(e){let t=e.numPoints,r=1e4<=t?`${Math.round(t/1e3)}k`:1e3<=t?Math.round(t/100)/10+"k":t;return se(se({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function ne(e){return e=Math.sin(e*Math.PI/180),e=.5-.25*Math.log((1+e)/(1-e))/Math.PI,0>e?0:1<e?1:e}function se(e,t){for(let r in t)e[r]=t[r];return e}function le(e){return e.x}function ce(e){return e.y}class ue{constructor({markers:e,position:t}){this.markers=e,t&&(this._position=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t))}get bounds(){if(0!==this.markers.length||this._position)return this.markers.reduce(((e,t)=>e.extend(t.getPosition())),new google.maps.LatLngBounds(this._position,this._position))}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>e.getVisible())).length}push(e){this.markers.push(e)}delete(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}class de{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return pe(e)}}let pe=e=>e.map((e=>new ue({position:e.getPosition(),markers:[e]})));class he extends de{constructor(e){var t,{maxZoom:r,radius:i=60}=e,a=["maxZoom","radius"],o={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>a.indexOf(t)&&(o[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)0>a.indexOf(t[n])&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]])}super({maxZoom:r}),this.superCluster=new te(Object.assign({maxZoom:this.maxZoom,radius:i},o)),this.state={zoom:null}}calculate(e){let t=!1;if(!A(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var r=this.markers.map((e=>({type:"Feature",geometry:{type:"Point",coordinates:[e.getPosition().lng(),e.getPosition().lat()]},properties:{marker:e}})));this.superCluster.load(r)}return r={zoom:e.map.getZoom()},t||this.state.zoom>this.maxZoom&&r.zoom>this.maxZoom||(t=t||!A(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(this.transformCluster.bind(this))}transformCluster({geometry:{coordinates:[e,t]},properties:r}){return r.cluster?new ue({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:new google.maps.LatLng({lat:t,lng:e})}):(e=r.marker,new ue({markers:[e],position:e.getPosition()}))}}class me{constructor(e,t){this.markers={sum:e.length},e=t.map((e=>e.count));let r=e.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...e),max:Math.max(...e)}}}}class fe{render({count:e,position:t},r){return r=window.btoa(`\n  <svg fill="${e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>`),new google.maps.Marker({position:t,icon:{url:`data:image/svg+xml;base64,${r}`,scaledSize:new google.maps.Size(45,45)},label:{text:String(e),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:`Cluster of ${e} markers`,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+e})}}class ge{constructor(){var e=ge,t=google.maps.OverlayView;for(let r in t.prototype)e.prototype[r]=t.prototype[r]}}var ve,ye=ve||(ve={});ye.CLUSTERING_BEGIN="clusteringbegin",ye.CLUSTERING_END="clusteringend",ye.CLUSTER_CLICK="click";let be=(e,t,r)=>{r.fitBounds(t.bounds)};class ke extends ge{constructor({map:e,markers:t=[],algorithm:r=new he({}),renderer:i=new fe,onClusterClick:a=be}){super(),this.markers=[...t],this.clusters=[],this.algorithm=r,this.renderer=i,this.onClusterClick=a,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){let r=this.markers.indexOf(e);return-1!==r&&(e.setMap(null),this.markers.splice(r,1),t||this.render(),!0)}removeMarkers(e,t){let r=!1;return e.forEach((e=>{r=this.removeMarker(e,!0)||r})),r&&!t&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){let e=this.getMap();if(e instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,ve.CLUSTERING_BEGIN,this);let{clusters:t,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});(r||void 0==r)&&(this.reset(),this.clusters=t,this.renderClusters()),google.maps.event.trigger(this,ve.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>e.setMap(null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){let e=new me(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((r=>{1===r.markers.length?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e),this.onClusterClick&&r.marker.addListener("click",(e=>{google.maps.event.trigger(this,ve.CLUSTER_CLICK,r),this.onClusterClick(e,r,t)}))),r.marker.setMap(t)}))}}let we=Object.values(ve);(0,i.aZ)({name:"MarkerCluster",props:{options:{type:Object,default:()=>({})}},emits:we,setup(e,{emit:t,expose:r,slots:a}){let o=(0,m.iH)(),n=(0,i.f3)(g,(0,m.iH)()),s=(0,i.f3)(v,(0,m.iH)());return(0,i.JJ)(b,o),(0,i.YP)(n,(()=>{n.value&&(o.value=(0,m.Xl)(new ke({map:n.value,...e.options})),we.forEach((e=>{var r;null===(r=o.value)||void 0===r||r.addListener(e,(r=>t(e,r)))})))}),{immediate:!0}),(0,i.Jd)((()=>{var e;o.value&&(null===(e=s.value)||void 0===e||e.event.clearInstanceListeners(o.value),o.value.clearMarkers(),o.value.setMap(null))})),r({markerCluster:o}),()=>{var e;return null===(e=a.default)||void 0===e?void 0:e.call(a)}}});var Ce=(0,i.aZ)({inheritAttrs:!1,props:{options:{type:Object,required:!0}},setup(e,{slots:t,emit:r}){let a=(0,m.iH)(),o=(0,m.iH)(),n=(0,i.Fl)((()=>{var e;return null===(e=t.default)||void 0===e?void 0:e.call(t).some((e=>e.type!==i.sv))})),s=(0,i.Fl)((()=>({...e.options,element:a.value})));return(0,i.bv)((()=>{o=j(k,[],s,r)})),{customMarkerRef:a,customMarker:o,hasSlotContent:n}}});P("\n.custom-marker-wrapper[data-v-b9d5ec8a] {\n  display: none;\n}\n.mapdiv .custom-marker-wrapper[data-v-b9d5ec8a] {\n  display: inline-block;\n}\n");let xe=(0,i.HX)("data-v-b9d5ec8a");(0,i.dD)("data-v-b9d5ec8a");let Me={key:0,class:"custom-marker-wrapper"};(0,i.Cn)();let Oe=xe((e=>e.hasSlotContent?((0,i.wg)(),(0,i.j4)("div",Me,[(0,i.Wm)("div",(0,i.dG)({ref:"customMarkerRef",style:{cursor:e.$attrs.onClick?"pointer":void 0}},e.$attrs),[(0,i.WI)(e.$slots,"default",{},void 0,!0)],16)])):(0,i.kq)("v-if",!0)));Ce.render=Oe,Ce.__scopeId="data-v-b9d5ec8a";(0,i.aZ)({name:"HeatmapLayer",props:{options:{type:Object,default:()=>({})}},setup(e){let t=(0,m.iH)(),r=(0,i.f3)(g,(0,m.iH)()),a=(0,i.f3)(v,(0,m.iH)());return(0,i.YP)([r,()=>e.options],(([,e],[i,o])=>{var n;if(i=!A(e,o)||r.value!==i,r.value&&a.value&&i){if(e=structuredClone(e),e.data&&!(e.data instanceof a.value.MVCArray)){let t=a.value.LatLng;e.data=null===(n=e.data)||void 0===n?void 0:n.map((e=>e instanceof t||"location"in e&&(e.location instanceof t||null===e.location)?e:"location"in e?{...e,location:new t(e.location)}:new t(e)))}t.value?t.value.setOptions(e):t.value=(0,m.Xl)(new a.value.visualization.HeatmapLayer({...e,map:r.value}))}}),{immediate:!0}),(0,i.Jd)((()=>{t.value&&t.value.setMap(null)})),{heatmapLayer:t}},render:()=>null});var Se=r(6056),_e=r(6035),Ee=r(70),Pe=Se.I.currentUser,Ie=Pe.email,Te={data(){return{apiKey:"AIzaSyAkfyeLx1NBJBiwnnN55ES06fqIZHDKZO0",markers:[],dateStr:"",qty:0,center:{lat:Number(this.lat),lng:Number(this.lng)},currentMarker:{},markerArr:[],periods:[],worstScenario:""}},methods:{forecast(e){this.currentMarker=this.markerArr[e],console.log(`index: ${e}, startTime: ${this.currentMarker.startTime}, endTime: ${this.currentMarker.endTime}, region: ${this.currentMarker.region}`);const t=`${this.dateStr}T${this.currentMarker.startTime}:00`,r=`${this.dateStr}T${this.currentMarker.endTime}:00`,i=this.currentMarker.region.toLowerCase();Ee.ZP.get("https://api.data.gov.sg/v1/environment/24-hour-weather-forecast",{params:{date_time:t}}).then((e=>{this.periods=e.data.items[0].periods;var a={};const o=Date.parse(t),n=Date.parse(r);var s=!1,l=!1;for(const t in this.periods){const e=Date.parse(this.periods[t].time.start),r=Date.parse(this.periods[t].time.end);if(e<=o&&o<r&&(s=!0),e<n&&n<=r&&(l=!0),s){a[t]=this.periods[t];for(const e in this.periods[t].regions)if(e==i){let r={};r[e]=this.periods[t].regions[e],a[t].regions=r}if(s&&l)return this.periods=[a[t]],void this.getWorstScenario()}}}))},getWorstScenario(){var e=[{rank:1,weather:"Thundery Showers"},{rank:2,weather:"Showers"},{rank:3,weather:"Light Rain"},{rank:4,weather:"Cloudy"}],t=Number.MAX_VALUE;const r=this.currentMarker.region.toLowerCase();if(1==Object.keys(this.periods).length)this.worstScenario=this.periods[0].regions[r];else for(const i in this.periods)for(const a of e)a.rank<t&&a.weather==this.periods[i].regions[r]&&(t=a.rank,this.worstScenario=a.weather);this.currentMarker.weather=this.worstScenario}},components:{GoogleMap:E,Marker:D,InfoWindow:H},async created(){const e=new Date,t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();this.dateStr=`${t}-${r}-${i}`;const a=(0,_e.hJ)(Se.db,Ie);let o=[];const n=await(0,_e.PL)((0,_e.IO)((0,_e.hJ)(a,this.dateStr,"activities"),(0,_e.Xo)("startTime","asc")));n.forEach((e=>{o.push({id:e.id,startTime:e.data().startTime,endTime:e.data().endTime,lat:e.data().lat,lng:e.data().lng,location:e.data().location,activityName:e.data().activityName,region:e.data().region,isRain:e.data().isRain}),this.markerArr=o})),this.qty=Object.keys(this.markerArr).length}},Le=r(89);const Ae=(0,Le.Z)(Te,[["render",h]]);var je=Ae;const Re={id:"forecast"};var De={__name:"ForecastView",setup(e){return(e,t)=>((0,i.wg)(),(0,i.iD)("main",Re,[(0,i._)("div",null,[(0,i.Wm)(je)])]))}};const qe=De;var ze=qe}}]);
//# sourceMappingURL=489.65f52bff.js.map