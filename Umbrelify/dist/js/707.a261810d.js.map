{"version":3,"file":"js/707.a261810d.js","mappings":"2LA4DQA,GAAG,S,GACFC,MAAM,a,GACFA,MAAM,6D,GACXC,EAAAA,EAAAA,GAMQ,eALNA,EAAAA,EAAAA,GAIK,YAHHA,EAAAA,EAAAA,GAAyB,MAArBC,MAAM,OAAM,SAChBD,EAAAA,EAAAA,GAA6B,MAAzBC,MAAM,OAAM,aAChBD,EAAAA,EAAAA,GAAkC,MAA9BC,MAAM,OAAM,qBAAa,G,GAKzBA,MAAM,O,SAEgDF,MAAM,sC,SACCA,MAAM,sC,oDAfjFG,EAAAA,EAAAA,IAuBO,OAvBPC,EAuBO,EAtBLH,EAAAA,EAAAA,GAqBM,MArBNI,EAqBM,EApBJJ,EAAAA,EAAAA,GAmBQ,QAnBRK,EAmBQ,CAlBNC,GAOAN,EAAAA,EAAAA,GAUQ,6BATNE,EAAAA,EAAAA,IAQKK,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IARcC,EAAAA,OAARC,K,WAAXP,EAAAA,EAAAA,IAQK,YAPHF,EAAAA,EAAAA,GAAuC,KAAvCU,GAAuC,QAApBD,EAAKE,SAAO,IAC/BX,EAAAA,EAAAA,GAIK,WAHyB,GAAhBS,EAAKE,SAA+B,QAAfF,EAAKG,SAAM,WAA5CV,EAAAA,EAAAA,IAA8I,OAA9IW,GAA8I,QAAxCJ,EAAKK,UAAW,oBAAiB,IACtG,GAAhBL,EAAKE,SAA+B,UAAfF,EAAKG,SAAM,WAAjDV,EAAAA,EAAAA,IAAqJ,OAArJa,GAAqJ,QAAxCN,EAAKK,UAAW,oBAAiB,iBAC9IZ,EAAAA,EAAAA,IAAuC,kBAAvBO,EAAKK,UAAQ,OAE/Bd,EAAAA,EAAAA,GAA6B,mBAAtBS,EAAKO,WAAS,Q,8CA7DjC,GAFWC,EAAAA,EAAAA,YAEX,CACEC,OACE,MAAO,CACLC,MAAO,GAEX,EACAC,gBAGE,MAAMC,GAAuBC,EAAAA,EAAAA,KAC3BC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,aACfC,EAAAA,EAAAA,IAAQ,mBAAoB,UAE9BC,EAAAA,EAAAA,IAAWL,GAAuBM,IAChC,GAAIA,EAAcC,WACX,CACL,IAAIjB,EAAU,EACdgB,EAAcE,SAASC,IACrBnB,IAEAoB,KAAKC,cAAcrB,EAASmB,EAAIhC,IAChC,MAAMW,EAAO,CACXK,SAAUgB,EAAIZ,OAAOJ,SACrBE,UAAWc,EAAIZ,OAAOe,iBACtBtB,QAASA,EACTC,OAAQkB,EAAIZ,OAAON,QAErBmB,KAAKZ,MAAMe,KAAKzB,EAAK,GAEzB,IAEJ,EACA0B,QAAS,CACPH,cAAcrB,EAASb,IACnBsC,EAAAA,EAAAA,KAAUN,EAAAA,EAAAA,IAAIN,EAAAA,GAAI,WAAY1B,GAAK,CAC/Ba,QAASA,GAEjB,K,QCjDJ,MAAM0B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,Q,uJCJA,MAAM,EAAc,EAEpB,O","sources":["webpack://project/./src/components/Leaderboard.vue","webpack://project/./src/components/Leaderboard.vue?23d5","webpack://project/./src/views/LeaderboardView.vue"],"sourcesContent":["<script setup>\n</script>\n\n<script>\nimport {\n  collection,\n  onSnapshot,\n  doc,\n  updateDoc,\n  query,\n  orderBy,\n} from \"firebase/firestore\";\nimport { db } from \"@/firebase\";\nimport { auth } from \"../firebase\";\n\nvar user = auth.currentUser;\n\nexport default {\n  data() {\n    return {\n      users: [],\n    };\n  },\n  async created() {\n\n    // TODO: get the rank, sort results by rain_event_count\n    const usersCollectionQuery = query(\n      collection(db, \"UserInfo\"),\n      orderBy(\"rain_event_count\", \"desc\")\n    );\n    onSnapshot(usersCollectionQuery, (querySnapshot) => {\n      if (querySnapshot.empty) {\n      } else {\n        let ranking = 0;\n        querySnapshot.forEach((doc) => {\n          ranking++;\n          // write ranking to DB\n          this.updateRanking(ranking, doc.id)\n          const user = {\n            username: doc.data().username,\n            raincount: doc.data().rain_event_count,\n            ranking: ranking,\n            gender: doc.data().gender\n          };\n          this.users.push(user);\n        });\n      }\n    });\n  },\n  methods: {\n    updateRanking(ranking, id){\n        updateDoc(doc(db, \"UserInfo\", id), {\n            ranking: ranking,\n        });\n    }\n  }\n};\n</script>\n\n<template>\n  <main id=\"input\">\n    <div class=\"container\">\n      <table class=\"table table-dark table-striped table-bordered text-center\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Rank</th>\n            <th scope=\"col\">Username</th>\n            <th scope=\"col\">Rain Event(s)</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"user in users\">\n            <th scope=\"row\">{{ user.ranking }}</th>\n            <td>\n              <span v-if=\"user.ranking == 1 && user.gender == 'Male'\" class=\"badge rounded-pill text-bg-warning\">{{ user.username }} the Rain Kor Kor</span>\n              <span v-else-if=\"user.ranking == 1 && user.gender == 'Female'\" class=\"badge rounded-pill text-bg-warning\">{{ user.username }} the Rain Jie Jie</span>\n              <span v-else>{{ user.username }}</span>\n            </td>\n            <td>{{ user.raincount }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </main>\n</template>","import { render } from \"./Leaderboard.vue?vue&type=template&id=254325ed\"\nimport script from \"./Leaderboard.vue?vue&type=script&lang=js\"\nexport * from \"./Leaderboard.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/yam/SMU/IS216/is216/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import script from \"./LeaderboardView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LeaderboardView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["id","class","_createElementVNode","scope","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","$data","user","_hoisted_5","ranking","gender","_hoisted_6","username","_hoisted_7","raincount","auth","data","users","async","usersCollectionQuery","query","collection","db","orderBy","onSnapshot","querySnapshot","empty","forEach","doc","this","updateRanking","rain_event_count","push","methods","updateDoc","__exports__","render"],"sourceRoot":""}